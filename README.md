<div align="center">
<img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />

# WYY AURA Personal Media Hub

**ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä¸ªäººåª’ä½“ä¸­å¿ƒï¼Œé›†éŸ³ä¹ã€è§†é¢‘ã€ä»˜è´¹å†…å®¹å’Œäº‘å­˜å‚¨ç®¡ç†äºä¸€ä½“**

[![Next.js](https://img.shields.io/badge/Next.js-16.1.6-black)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-18.2.0-blue)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.7.2-blue)](https://www.typescriptlang.org/)
[![Supabase](https://img.shields.io/badge/Supabase-3.0-green)](https://supabase.com/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.4.17-38B2AC)](https://tailwindcss.com/)

</div>

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸµ åª’ä½“ä¸­å¿ƒ
- **éŸ³ä¹åº“**ï¼šåœ¨çº¿æ’­æ”¾ä¸ªäººéŸ³ä¹æ”¶è—
- **è§†é¢‘ä¸­å¿ƒ**ï¼šæµåª’ä½“æ’­æ”¾ä¸ªäººè§†é¢‘å†…å®¹
- **å®è—å†…å®¹**ï¼šä¼šå‘˜ä¸“å±çš„ä¼˜è´¨èµ„æº
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

### â˜ï¸ S3 äº‘å­˜å‚¨ç®¡ç†
- **æ–‡ä»¶ç®¡ç†**ï¼šä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ã€é¢„è§ˆæ–‡ä»¶
- **æ™ºèƒ½æœç´¢**ï¼šæŒ‰æ–‡ä»¶åã€æ—¥æœŸã€å¤§å°ç­›é€‰
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡ä¸Šä¼ å’Œåˆ é™¤
- **å®æ—¶é¢„è§ˆ**ï¼šåœ¨çº¿é¢„è§ˆå›¾ç‰‡ã€æ–‡æ¡£ç­‰æ–‡ä»¶
- **æƒé™æ§åˆ¶**ï¼šåŒé‡è®¤è¯ï¼ˆç”¨æˆ·Token + ç®¡ç†å‘˜å¯†ç ï¼‰

### ğŸ’³ æ”¯ä»˜ä¸è®¢é˜…
- **è®¢å•åˆ›å»º**ï¼šç”Ÿæˆå”¯ä¸€è®¢å•å·
- **æ”¯ä»˜çŠ¶æ€è·Ÿè¸ª**ï¼šå®æ—¶æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€
- **è®¢é˜…ç®¡ç†**ï¼šè‡ªåŠ¨æ¿€æ´»ä»˜è´¹è®¢é˜…
- **åŒé‡å­˜å‚¨**ï¼šåŒæ—¶ä¿å­˜åˆ°Supabaseå’ŒPostgreSQL

### ğŸ” å®‰å…¨è®¤è¯
- **ç”¨æˆ·è®¤è¯**ï¼šSupabaseèº«ä»½éªŒè¯ç³»ç»Ÿ
- **ç®¡ç†å‘˜æƒé™**ï¼šå¯†ç ä¿æŠ¤çš„ç®¡ç†ç•Œé¢
- **APIå®‰å…¨**ï¼šæ‰€æœ‰æ•æ„Ÿæ“ä½œéœ€è¦åŒé‡è®¤è¯
- **ç¯å¢ƒéš”ç¦»**ï¼šä¸¥æ ¼åŒºåˆ†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç¯å¢ƒå˜é‡

### ğŸ› ï¸ å¼€å‘è€…åŠŸèƒ½
- **æ•°æ®åº“è¿ç§»**ï¼šä¸€é”®æ‰§è¡ŒSQLè¿ç§»è„šæœ¬
- **æ”¯ä»˜å¯¹è´¦**ï¼šè‡ªåŠ¨åŒæ­¥æ”¯ä»˜çŠ¶æ€
- **APIæ–‡æ¡£**ï¼šå®Œæ•´çš„RESTful APIæ¥å£
- **ä»£ç è´¨é‡**ï¼šé›†æˆESLintå’ŒTypeScriptæ£€æŸ¥

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Next.js 16.1.6** - Reactå…¨æ ˆæ¡†æ¶
- **React 18.2.0** - UIç»„ä»¶åº“
- **TypeScript 5.7.2** - ç±»å‹å®‰å…¨
- **Tailwind CSS 3.4.17** - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- **Lucide React** - å›¾æ ‡åº“

### åç«¯
- **Supabase** - è®¤è¯å’Œæ•°æ®åº“
- **AWS SDK v3** - S3å…¼å®¹å­˜å‚¨æ“ä½œ
- **PostgreSQL** - å…³ç³»å‹æ•°æ®åº“
- **Next.js API Routes** - æœåŠ¡å™¨ç«¯API

### å¼€å‘å·¥å…·
- **ESLint** - ä»£ç è§„èŒƒæ£€æŸ¥
- **PostCSS** - CSSå¤„ç†
- **Autoprefixer** - CSSå‰ç¼€è‡ªåŠ¨æ·»åŠ 

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+ 
- npm æˆ– yarn
- Supabaseè´¦æˆ·ï¼ˆç”¨äºè®¤è¯å’Œå­˜å‚¨ï¼‰
- S3å…¼å®¹å­˜å‚¨ï¼ˆSupabase Storageæˆ–AWS S3ï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd lovewwy
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **ç¯å¢ƒé…ç½®**
   ```bash
   cp .env.example .env.local
   ```
   ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„é…ç½®ï¼š
   ```env
   # Supabase è®¤è¯
   NEXT_PUBLIC_SUPABASE_AUTH_URL=https://your-project-ref.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
   
   # S3 å…¼å®¹å­˜å‚¨
   NEXT_PUBLIC_SUPABASE_S3_ENDPOINT=https://your-project-ref.storage.supabase.co/storage/v1/s3
   NEXT_PUBLIC_SUPABASE_S3_REGION=your-region
   NEXT_PUBLIC_SUPABASE_S3_ACCESS_KEY_ID=your-access-key-id
   NEXT_PUBLIC_SUPABASE_S3_SECRET_ACCESS_KEY=your-secret-access-key
   NEXT_PUBLIC_SUPABASE_S3_BUCKET=your-bucket-name
   
   # Edge Function
   NEXT_PUBLIC_FUNCTIONS_URL=https://your-project-ref.functions.supabase.co/s3-compat-storage
   
   # æ”¯ä»˜é›†æˆ
   NEXT_PUBLIC_PAYMENT_API_URL=https://your-payment-api.com
   PAYMENT_API_URL=https://your-payment-api.com
   
   # å®‰å…¨å¯†é’¥
   SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
   MIGRATE_SECRET=a-strong-secret-here
   ```

4. **è¿è¡Œå¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```
   è®¿é—® http://localhost:3000

5. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**
   ```bash
   npm run build
   npm start
   ```

## ğŸ“ é¡¹ç›®ç»“æ„

```
lovewwy/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ admin/         # ç®¡ç†å‘˜API
â”‚   â”‚   â”œâ”€â”€ list-files/    # æ–‡ä»¶åˆ—è¡¨API
â”‚   â”‚   â”œâ”€â”€ payments/      # æ”¯ä»˜API
â”‚   â”‚   â””â”€â”€ subscriptions/ # è®¢é˜…API
â”‚   â”œâ”€â”€ admin/             # ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ music/             # éŸ³ä¹é¡µé¢
â”‚   â”œâ”€â”€ videos/            # è§†é¢‘é¡µé¢
â”‚   â”œâ”€â”€ treasure/          # å®è—é¡µé¢
â”‚   â”œâ”€â”€ profile/           # ç”¨æˆ·èµ„æ–™
â”‚   â”œâ”€â”€ layout.tsx         # æ ¹å¸ƒå±€
â”‚   â””â”€â”€ page.tsx           # é¦–é¡µ
â”œâ”€â”€ components/            # Reactç»„ä»¶
â”‚   â”œâ”€â”€ S3Admin.tsx        # S3ç®¡ç†ç•Œé¢
â”‚   â”œâ”€â”€ AdminLoginModal.tsx # ç®¡ç†å‘˜ç™»å½•
â”‚   â”œâ”€â”€ MusicHub.tsx       # éŸ³ä¹ä¸­å¿ƒ
â”‚   â”œâ”€â”€ VideoFeed.tsx      # è§†é¢‘æµ
â”‚   â”œâ”€â”€ TreasureBox.tsx    # å®è—å†…å®¹
â”‚   â””â”€â”€ ...å…¶ä»–ç»„ä»¶
â”œâ”€â”€ src/lib/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ supabaseClient.ts  # Supabaseå®¢æˆ·ç«¯
â”‚   â””â”€â”€ auth.ts            # è®¤è¯å·¥å…·
â”œâ”€â”€ services/              # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ storageService.ts  # å­˜å‚¨æœåŠ¡
â”‚   â”œâ”€â”€ paymentService.ts  # æ”¯ä»˜æœåŠ¡
â”‚   â””â”€â”€ postgresService.ts # æ•°æ®åº“æœåŠ¡
â”œâ”€â”€ db/migrations/         # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ styles/                # å…¨å±€æ ·å¼
â””â”€â”€ public/                # é™æ€èµ„æº
```

## ğŸ”§ API æ¥å£

### æ–‡ä»¶ç®¡ç† API
- `GET /api/list-files` - åˆ—å‡ºS3æ–‡ä»¶
- `POST /api/admin/migrate` - æ•°æ®åº“è¿ç§»ï¼ˆéœ€è¦ç®¡ç†å‘˜å¯†ç ï¼‰
- `POST /api/admin/reconcile` - æ”¯ä»˜å¯¹è´¦ï¼ˆéœ€è¦ç®¡ç†å‘˜å¯†ç ï¼‰

### æ”¯ä»˜ API
- `POST /api/payments/create` - åˆ›å»ºè®¢å•
- `GET /api/payments/status` - æŸ¥è¯¢è®¢å•çŠ¶æ€
- `POST /api/payments/confirm` - ç¡®è®¤æ”¯ä»˜å¹¶æ¿€æ´»è®¢é˜…

### è®¢é˜… API
- `GET /api/subscriptions/status` - æŸ¥è¯¢ç”¨æˆ·è®¢é˜…çŠ¶æ€

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### åŒé‡è®¤è¯ç³»ç»Ÿ
æ‰€æœ‰æ•æ„Ÿæ“ä½œéœ€è¦åŒé‡è®¤è¯ï¼š
1. **ç”¨æˆ·Token**ï¼šä»Supabaseè·å–çš„è®¿é—®ä»¤ç‰Œ
2. **ç®¡ç†å‘˜å¯†ç **ï¼šé€šè¿‡propsä¼ é€’çš„ç®¡ç†å‘˜å¯†ç 

### ç¯å¢ƒå˜é‡å®‰å…¨
- `NEXT_PUBLIC_` å‰ç¼€ï¼šå®¢æˆ·ç«¯å¯è®¿é—®
- æ— å‰ç¼€ï¼šä»…æœåŠ¡å™¨ç«¯å¯è®¿é—®
- æ•æ„Ÿå¯†é’¥ç»ä¸æš´éœ²ç»™å®¢æˆ·ç«¯

### API ä¿æŠ¤
- æ‰€æœ‰ç®¡ç†APIéœ€è¦ `x-admin-password` è¯·æ±‚å¤´
- ç”¨æˆ·ç›¸å…³APIéœ€è¦ `Authorization: Bearer <token>` è¯·æ±‚å¤´
- æ•°æ®åº“è¿ç§»éœ€è¦é¢å¤–çš„ `x-migrate-secret` è¯·æ±‚å¤´

## ğŸš¢ éƒ¨ç½²

### Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰
1. è¿æ¥GitHubä»“åº“åˆ°Vercel
2. é…ç½®æ‰€æœ‰ç¯å¢ƒå˜é‡
3. éƒ¨ç½²åˆ†æ”¯

### ç¯å¢ƒå˜é‡é…ç½®ï¼ˆVercelï¼‰
ç¡®ä¿ä»¥ä¸‹å˜é‡å·²é…ç½®ï¼š
- æ‰€æœ‰ `NEXT_PUBLIC_` å¼€å¤´çš„å˜é‡
- `SUPABASE_SERVICE_ROLE_KEY`
- `MIGRATE_SECRET`
- `DATABASE_URL`ï¼ˆå¦‚ä½¿ç”¨ç‹¬ç«‹PostgreSQLï¼‰

### Supabase CORS é…ç½®
åœ¨Supabaseå­˜å‚¨æ¡¶è®¾ç½®ä¸­ï¼š
1. è¿›å…¥Storage â†’ Buckets â†’ ä½ çš„æ¡¶
2. åœ¨CORSé…ç½®ä¸­æ·»åŠ ä½ çš„ç”Ÿäº§åŸŸå
3. ä¿å­˜æ›´æ”¹

## ğŸ“Š æ•°æ®åº“

### è¡¨ç»“æ„
```sql
-- è®¢é˜…è¡¨ï¼ˆç¤ºä¾‹ï¼‰
CREATE TABLE subscriptions (
  id SERIAL PRIMARY KEY,
  user_id TEXT,
  order_no TEXT UNIQUE,
  status TEXT CHECK (status IN ('pending', 'active', 'cancelled')),
  tx_hash TEXT,
  amount DECIMAL(10,2),
  metadata JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### è¿ç§»è„šæœ¬
é¡¹ç›®åŒ…å«æ•°æ®åº“è¿ç§»ç³»ç»Ÿï¼š
```bash
# é€šè¿‡APIæ‰§è¡Œè¿ç§»
curl -X POST /api/admin/migrate \
  -H "x-migrate-secret: your-secret"
```

## ğŸ§ª å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start

# ä»£ç æ£€æŸ¥
npm run lint

# å®‰å…¨å®¡è®¡
npm audit
```

## ğŸ”„ æ›´æ–°æ—¥å¿—

### æœ€æ–°æ›´æ–°
- âœ… å‡çº§Next.jsåˆ°16.1.6ï¼Œä¿®å¤å®‰å…¨æ¼æ´
- âœ… é‡æ„authFetchä¸ºå¯å¤ç”¨æ¨¡å—
- âœ… æ‰€æœ‰APIè·¯ç”±æ·»åŠ åŠ¨æ€å¯¼å‡º
- âœ… æ·»åŠ ESLintä»£ç æ£€æŸ¥
- âœ… å®Œå–„TypeScriptç±»å‹å®šä¹‰

### è¿‘æœŸè®¡åˆ’
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] å®ç°æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ 
- [ ] æ·»åŠ è§†é¢‘è½¬ç åŠŸèƒ½
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›ä¸ªäººä½¿ç”¨ï¼Œä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestã€‚

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **S3æ–‡ä»¶åˆ—è¡¨ä¸ºç©º**
   - æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤Supabaseå­˜å‚¨æ¡¶CORSé…ç½®
   - éªŒè¯ç®¡ç†å‘˜å¯†ç æ˜¯å¦æ­£ç¡®ä¼ é€’

2. **æ”¯ä»˜çŠ¶æ€ä¸åŒæ­¥**
   - æ£€æŸ¥æ”¯ä»˜APIè¿æ¥
   - éªŒè¯SUPABASE_SERVICE_ROLE_KEYé…ç½®
   - æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

3. **æ„å»ºå¤±è´¥**
   - è¿è¡Œ `rm -rf .next node_modules package-lock.json && npm install`
   - æ£€æŸ¥TypeScriptç±»å‹é”™è¯¯
   - éªŒè¯ç¯å¢ƒå˜é‡å®Œæ•´æ€§

### è·å–å¸®åŠ©
- æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
- æäº¤GitHub Issue
- æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

---

<div align="center">
<sub>Built with â¤ï¸ using Next.js, React, and Supabase</sub>
</div>
